import { Steps } from 'nextra/components'
import InfoIcon from '../../../../app/_components/icons/info.jsx'
import AppleIcon from '../../../../app/_components/icons/ihv/apple.jsx'
import AMDIcon from '../../../../app/_components/icons/ihv/amd.jsx'
import IntelIcon from '../../../../app/_components/icons/ihv/intel.jsx'
import QualcommIcon from '../../../../app/_components/icons/ihv/qualcomm.jsx'
import NvidiaIcon from '../../../../app/_components/icons/ihv/nvidia.jsx'

# Debugging

## Use Custom Build of ONNX Runtime

1. Follow the [WebNN Installation Guide](installation) to enable WebNN API and switch to Windows ML / ONNX Runtime backend
2. Put the ONNX Runtime dynamic link librares into a folder under `C:\Program Files\`, e.g. `C:\Program Files\ONNXRuntime`
3. Launch your Chrome or Edge browser with switch [`--webnn-ort-library-path-for-testing`](../../api-reference/browser-compatibility/chrome-flags#--webnn-ort-library-path-for-testing)

<div className="ort-ep">
```shell
"%LOCALAPPDATA%\Google\Chrome SxS\Application\chrome.exe" --webnn-ort-library-path-for-testing="C:\Program Files\ONNXRuntime" --allow-third-party-modules
```
</div>

<div className="ort-ep">
```shell
"%LOCALAPPDATA%\Microsoft\Edge SxS\Application\msedge.exe" --webnn-ort-library-path-for-testing="C:\Program Files\ONNXRuntime" --allow-third-party-modules
```
</div>

## Use Custom Build of Execution Providers

If you are running WebNN on AMD, Intel, Nvidia, or Qualcomm devices and need to debug WebNN using specific Execution Provider of ONNX Runtime:

1. Follow the [WebNN Installation Guide](installation) to enable WebNN API and switch to Windows ML / ONNX Runtime backend
2. Put the ONNX Runtime and Execution Provider dynamic link librares into a folder under `C:\Program Files\`, e.g. `C:\Program Files\ONNXRuntime-EP`
3. Launch your Chrome or Edge browser with switch [`--webnn-ort-ep-library-path-for-testing`](../../api-reference/browser-compatibility/chrome-flags#--webnn-ort-ep-library-path-for-testing)

### Execution Provider Mapping Table for Independent Hardware Vendors

<div className="table-center">
| IHVs | Execution Provider | DLL |
| --- | --- | -- |
| <IntelIcon /> | OpenVINOExecutionProvider | onnxruntime_providers_openvino_plugin.dll |
| <AMDIcon /> | TBD | TBD |
| <NvidiaIcon /> | NvTensorRTRTXExecutionProvider | onnxruntime_providers_nv_tensorrt_rtx.dll |
| <QualcommIcon /> | QNNExecutionProvider | onnxruntime_providers_qnn.dll |
</div>

### Intel OpenVINO Execution Provider

The following examples show how to specify the locations of `ONNX Runtime` and `Intel OpenVINO Execution Provider` libraries:

<div className="ort-ep">
```shell
"%LOCALAPPDATA%\Google\Chrome SxS\Application\chrome.exe" --webnn-ort-ep-library-path-for-testing=OpenVINOExecutionProvider?"C:\Program Files\ONNXRuntime-EP\onnxruntime_providers_openvino_plugin.dll" --allow-third-party-modules
```
</div>

<div className="ort-ep">
```shell
"%LOCALAPPDATA%\Microsoft\Edge SxS\Application\msedge.exe" --webnn-ort-ep-library-path-for-testing=OpenVINOExecutionProvider?"C:\Program Files\ONNXRuntime-EP\onnxruntime_providers_openvino_plugin.dll" --allow-third-party-modules
```
</div>

### Other IHVs

#### AMD (TBD)

TBD

#### Nvidia Nv Tensor RT RTX Execution Provider	

<div className="ort-ep">
```shell
"%LOCALAPPDATA%\Google\Chrome SxS\Application\chrome.exe" --webnn-ort-ep-library-path-for-testing=NvTensorRTRTXExecutionProvider?"C:\Program Files\ONNXRuntime-EP\onnxruntime_providers_nv_tensorrt_rtx.dll" --allow-third-party-modules
```
</div>

<div className="ort-ep">
```shell
"%LOCALAPPDATA%\Microsoft\Edge SxS\Application\msedge.exe" --webnn-ort-ep-library-path-for-testing=NvTensorRTRTXExecutionProvider?"C:\Program Files\ONNXRuntime-EP\onnxruntime_providers_nv_tensorrt_rtx.dll" --allow-third-party-modules
```
</div>

#### Qualcomm QNN Execution Provider

<div className="ort-ep">
```shell
"%LOCALAPPDATA%\Google\Chrome SxS\Application\chrome.exe" --webnn-ort-ep-library-path-for-testing=QNNExecutionProvider?"C:\Program Files\ONNXRuntime-EP\onnxruntime_providers_qnn.dll" --allow-third-party-modules
```
</div>

<div className="ort-ep">
```shell
"%LOCALAPPDATA%\Microsoft\Edge SxS\Application\msedge.exe" --webnn-ort-ep-library-path-for-testing=QNNExecutionProvider?"C:\Program Files\ONNXRuntime-EP\onnxruntime_providers_qnn.dll" --allow-third-party-modules
```
</div>

## Use Custom Build of GPU or NPU Drivers

If you are testing with custom or internal GPU or NPU drivers, add the [`--allow-third-party-modules`](../../api-reference/browser-compatibility/chrome-flags#--allow-third-party-modules) switch when launching the browser.

<div className="ort-ep">
```shell
"%LOCALAPPDATA%\Google\Chrome SxS\Application\chrome.exe" --allow-third-party-modules
```
</div>

<div className="ort-ep">
```shell
"%LOCALAPPDATA%\Microsoft\Edge SxS\Application\msedge.exe" --allow-third-party-modules
```
</div>

## Debug Sandbox Issues

In some cases, you may need to debug WebNN by disabling Chromium's security sandbox using the [`--disable-gpu-sandbox`](../../api-reference/browser-compatibility/chrome-flags#--disable-gpu-sandbox) switch.

<div className="ort-ep">
```shell
"%LOCALAPPDATA%\Google\Chrome SxS\Application\chrome.exe" --disable-gpu-sandbox
```
</div>

<div className="ort-ep">
```shell
"%LOCALAPPDATA%\Microsoft\Edge SxS\Application\msedge.exe" --disable-gpu-sandbox
```
</div>

## Inspect the Verbose Logging

You can configure the logging severity level of ONNX Runtime using the switch [`--webnn-ort-logging-level`](../../api-reference/browser-compatibility/chrome-flags#--webnn-ort-logging-level). Other available severity levels include "INFO", "WARNING", "ERROR" (default), and "FATAL".

<div className="ort-ep">
```shell
"%LOCALAPPDATA%\Google\Chrome SxS\Application\chrome.exe" --webnn-ort-logging-level=VERBOSE
```
</div>

<div className="ort-ep">
```shell
"%LOCALAPPDATA%\Microsoft\Edge SxS\Application\msedge.exe" --webnn-ort-logging-level=VERBOSE
```
</div>

## Additional Debug Options

Additional WebNN switches are available:

- [`--webnn-ort-ep-device`](../../api-reference/browser-compatibility/chrome-flags#--webnn-ort-ep-device)
- [`--webnn-ort-ignore-ep-blocklist`](../../api-reference/browser-compatibility/chrome-flags#--webnn-ort-ignore-ep-blocklist)
- [`--webnn-ort-graph-optimization-level`](../../api-reference/browser-compatibility/chrome-flags#--webnn-ort-graph-optimization-level)
- [`--webnn-ort-enable-profiling`](../../api-reference/browser-compatibility/chrome-flags#--webnn-ort-enable-profiling)
- [`--webnn-ort-dump-model`](../../api-reference/browser-compatibility/chrome-flags#--webnn-ort-dump-model)
- [`--webnn-tflite-dump-model`](../../api-reference/browser-compatibility/chrome-flags#--webnn-tflite-dump-model)

## Additional Resources

- [WebNN Flags and Switches in Chromium](../../api-reference/browser-compatibility/chrome-flags)
- [Chromium: services/webnn/webnn_switches.h](https://source.chromium.org/chromium/chromium/src/+/main:services/webnn/webnn_switches.h;l=30)